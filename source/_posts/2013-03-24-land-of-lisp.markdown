---
layout: post
title: "land of lisp"
date: 2013-03-24 01:11
comments: true
categories: [Common Lisp, Lisp, book]
---
既に原著を読んでいたのだけれど、翻訳者に惹かれて日本語版も購入し再読。見た目は奇抜ながら、内容は硬派。副題に "One Game at a Time!" とあるように色々なゲームを作りながら Common Lisp を学ぶことができる。  
作るゲームは

* 数当て
* テキストアドベンチャー
* Grand Theft Wumpus (Wumpus という昔のゲームを元にしたもの)
* Orc Battle (コマンド選択式でモンスターと闘う)
* 進化ゲーム (ライフゲームに少し似ている)
* Attack of the Robots! (逃げながらロボット同士をぶつけて破壊する)
* Dice of Doom (陣取りゲームみたいなもの)

ともりだくさん。例えば Orc Battle では構造体を駆使してプログラムを作成するなど、それぞれに技術的なテーマもあるので、楽しくてためになるという非常にお徳な本に仕上がっている。  
しかも日本語版は訳が読みやすい上に原著にはない訳注が充実していて、現在はよほどのことがない限り原著で読む必要はないはず。

このような本を読む際には当然中に出てくるプログラムを実際に入力/実行しながらというスタイルが基本になるので、読むにあたって使うものを挙げておく。

* CLISP
* graphviz

Common Lisp の処理系として CLISP を使っている。CLISP に限定しているのは、shell からのコマンド実行やソケットなど、一部で CLISP 固有の機能を使用するため。そうしたことが気にならないのであれば、自分の好きな処理系で問題ないはず。  
graphviz は Grand Theft Wumpus でマップを png 出力する際になどに用いる。  
他にも Web サーバを作り、Dice of Doom でそれを作うので、インライン SVG が表示できる Web ブラウザが必要になるけれど、最近は多くのブラウザが対応しているため問題になることは少ないと思われる。なお、本の中では Firefox を使用していた。ただし、この本が書かれた時期が少し古いので、Web サーバに関してはそのままではブラウザの側がうまく動かず、先頭で

    (format t "HTTP/1.1 200 OK~%~%")

のように HTTP のレスポンスを返してやる必要があった。これから読む人は注意しておいた方が良いかも。

内容に関しては上述の通り楽しみながらステップアップで Common Lisp のプログラミングが学べるという優れものなのだけれど、ゲーム内で用いるデータ構造へのアクセスが分かりにくいのが難点。直接 car や cdr、配列アクセスを行うことが多いので、今扱っているデータ構造の詳細を把握していないとコードを追うのがとたんに難しくなる。ここは適切なアクセッサを用意しておいて欲しかった。  
挿絵や漫画も楽しいものが多いのだけれど、他の言語(特に Haskell)をよく dis っているので冗談が通じない人には向かない。ところで、日本語版では 10 章の挿絵がひとつ抜けている。原著 p.203 にあるもので、日本語版では p.197 に入ることになっていたはず。省略したものなのか、入れ忘れてしまったのかは定かではないが、この絵があると進化ゲームのフィールドがどのようなものなのか一目で分かるようになっているので、日本語版が唯一原著に劣る個所になってしまっているのが残念。


個人的に現在 Common Lisp の入門に最適と思っているのは "Practical Common Lisp" なのだけれど、それと比較するとこちらの本の方がとりあえず Common Lisp で何か作ってみたいというのには向いているし、内容的にも楽しい。ただ、"Practical Common Lisp" の方では本書に登場しない Package や CLOS も扱っていて、その名の通り Practical なのものになっている。なので Common Lisp を実際的な目的に使うのであれば本書読了後であっても読んで損はないと思う。ただ、日本語訳の『実践 Common Lisp』は未読なのでその翻訳の質は分からない。原著の方は Web でも公開されているので、英語が苦にならないのであれば[原著](http://www.gigamonkeys.com/book/)を読めばそれで良いかも。

最後に読んでいて気になったのは誤植が目立ったこと。普段あまり誤植などに気が付く方ではないのだけれど、それでも結構目にしたというのは全体ではかなりの誤植があると思しく、実際に[サポートページ](http://practical-scheme.net/wiliki/wiliki.cgi/Shiro:LandOfLisp)にはそれなりの数の訂正が載っている。最新の版では修正されているのだろうけれど、これから読む人は気を付けておくと良い。

